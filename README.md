# Experts Panel

[![CI/CD](https://github.com/andreysazonov/Experts_panel/workflows/CI%2FCD/badge.svg)](https://github.com/andreysazonov/Experts_panel/actions)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Python](https://img.shields.io/badge/python-3.11+-blue.svg)](https://python.org)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.104+-green.svg)](https://fastapi.tiangolo.com)
[![React](https://img.shields.io/badge/React-18+-blue.svg)](https://reactjs.org)

**–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∞ Telegram –∫–∞–Ω–∞–ª–æ–≤ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–Ω–æ–≥–æ–º–æ–¥–µ–ª—å–Ω–æ–π AI-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**

Experts Panel ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏–∑ Telegram –∫–∞–Ω–∞–ª–æ–≤ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤. –°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—É—é **8-—Ñ–∞–∑–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É Map-Resolve-Reduce pipeline** —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ AI-–º–æ–¥–µ–ª—è–º–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç–æ—á–Ω—ã—Ö –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª—å–Ω–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```mermaid
graph TD
    subgraph "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Å—Ä–µ–¥–∞"
        User[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å]
        Frontend[React Frontend Vite]
    end

    subgraph "–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Experts Panel"
        Backend[FastAPI Backend]
        subgraph "–ë–∞–∑–∞ –ó–Ω–∞–Ω–∏–π"
            DB[(SQLite PostgreSQL)]
        end
    end

    subgraph "–í–Ω–µ—à–Ω–∏–µ AI —Å–µ—Ä–≤–∏—Å—ã"
        LLM_API[OpenRouter API]
    end

    User -- "–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å" --> Frontend
    Frontend -- "API-–∑–∞–ø—Ä–æ—Å /api/v1/query SSE" --> Backend
    Backend -- "–û–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ LLM-–º–æ–¥–µ–ª—è–º" --> LLM_API
    Backend -- "–ò–∑–≤–ª–µ–∫–∞–µ—Ç –ø–æ—Å—Ç—ã, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, —Å–≤—è–∑–∏" --> DB
    Backend -- "–ü–æ—Ç–æ–∫–æ–º SSE –æ—Ç–¥–∞—ë—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –æ—Ç–≤–µ—Ç" --> Frontend
    Frontend -- "–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –æ—Ç–≤–µ—Ç –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏" --> User
```

### –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –∫–æ–Ω–≤–µ–π–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

```mermaid
graph TD
    A[–°—Ç–∞—Ä—Ç: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å] --> B{–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ –∑–∞–ø—Ä–æ—Å–∞}
    B --> C[1. Map-—Ñ–∞–∑–∞: Qwen 2.5]
    C -- "–ü–æ—Å—Ç—ã" --> D{–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ HIGH –∏ MEDIUM}
    D -- "HIGH –ø–æ—Å—Ç—ã" --> E[3. Resolve-—Ñ–∞–∑–∞: –ü–æ–∏—Å–∫ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ –≤ –ë–î]
    D -- "MEDIUM –ø–æ—Å—Ç—ã" --> F[2. Scoring-—Ñ–∞–∑–∞: Qwen 2.5]
    F -- "Top-5 –ø–æ—Å—Ç–æ–≤ score >= 0.7" --> G[4. Reduce-—Ñ–∞–∑–∞: Gemini Flash]
    E -- "–û–±–æ–≥–∞—â–µ–Ω–Ω—ã–µ HIGH –ø–æ—Å—Ç—ã" --> G
    G -- "–°–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç" --> H[5. Language Validation: Qwen 2.5]
    H -- "–û—Ç–≤–µ—Ç –Ω–∞ –Ω—É–∂–Ω–æ–º —è–∑—ã–∫–µ" --> I{–°–±–æ—Ä–∫–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞}

    subgraph "–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π Pipeline B: –ü–æ–∏—Å–∫ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö"
        J[6. –ü–æ–∏—Å–∫ –ø–æ Drift Topics] --> K[7. –°–∏–Ω—Ç–µ–∑ –∏–Ω—Å–∞–π—Ç–æ–≤ –∏–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤]
    end

    A --> J
    K --> I[8. Response Building]

    I --> L[–§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç]

    classDef llm_step fill:#f9f,stroke:#333,stroke-width:2px
    class C,F,G,H,J,K llm_step
```

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –¥–∞–Ω–Ω—ã—Ö

```mermaid
graph TD
    subgraph "–≠—Ç–∞–ø 1: –†—É—á–Ω–æ–π –∏–º–ø–æ—Ä—Ç –ü–µ—Ä–≤–∏—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞"
        A[–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä] --> B[json_parser.py]
        C[JSON —ç–∫—Å–ø–æ—Ä—Ç –∏–∑ Telegram] --> B
        B --> D[–ó–∞–ø–∏—Å—å –ø–æ—Å—Ç–æ–≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ —Å–≤—è–∑–µ–π –≤ –ë–î]
    end

    subgraph "–≠—Ç–∞–ø 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è"
        E[Cron Job –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫] --> F[sync_channel.py]
        F -- "–ü–æ–ª—É—á–∞–µ—Ç ID –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ—Å—Ç–∞" --> G[–ë–î]
        G -- "–û—Ç–¥–∞—ë—Ç ID" --> F
        F -- "–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ" --> H[Telegram API]
        H -- "–û—Ç–¥–∞—ë—Ç –Ω–æ–≤—ã–µ –ø–æ—Å—Ç—ã –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏" --> F
        F --> I[–û–±–Ω–æ–≤–ª—è–µ—Ç –¥–æ–±–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ë–î]
        F --> J[–ü–æ–º–µ—á–∞–µ—Ç –Ω–æ–≤—ã–µ –≥—Ä—É–ø–ø—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∫–∞–∫ pending]
    end

    D --> G
    I --> G
    J --> G
```

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—É—Ç—å

```mermaid
graph TD
    A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ] --> B{–í–∏–¥–∏—Ç —Ñ–æ—Ä–º—É –≤–≤–æ–¥–∞}
    B --> C[–í–≤–æ–¥–∏—Ç –≤–æ–ø—Ä–æ—Å –∏ –Ω–∞–∂–∏–º–∞–µ—Ç Ask]
    C --> D[UI –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ Processing]
    D --> E[ProgressSection –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏]
    E --> F["–ü–æ—è–≤–ª—è—é—Ç—Å—è —Å—Ç–∞—Ç—É—Å—ã: Map - Resolve - Reduce ..."]
    F --> G[–ë—ç–∫–µ–Ω–¥ –ø—Ä–∏—Å—ã–ª–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç]
    G --> H[–ü–æ—è–≤–ª—è—é—Ç—Å—è –∞–∫–∫–æ—Ä–¥–µ–æ–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–∫—Å–ø–µ—Ä—Ç–∞]
    H -- "–ö–ª–∏–∫ –Ω–∞ –∞–∫–∫–æ—Ä–¥–µ–æ–Ω" --> I{–†–∞—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç}
    I --> J[–í–∏–¥–∏—Ç –æ—Ç–≤–µ—Ç –∏ —Å–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤-–∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤]
    J -- "–ö–ª–∏–∫ –Ω–∞ —Å—Å—ã–ª–∫—É post ID –≤ –æ—Ç–≤–µ—Ç–µ" --> K[–ù—É–∂–Ω—ã–π –ø–æ—Å—Ç –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ]
    J -- "–ö–ª–∏–∫ –Ω–∞ –ø–æ—Å—Ç –≤ —Å–ø–∏—Å–∫–µ" --> L[–ü–æ—Å—Ç —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –ø–æ–∫–∞–∑—ã–≤–∞—è –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏]
    L --> J
    H --> B
```

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è

```mermaid
graph TD
    subgraph "–ò–Ω—Ç–µ—Ä–Ω–µ—Ç"
        User[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å]
    end

    subgraph "–û–±–ª–∞—á–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ Fly.io Railway"
        LB[Load Balancer Proxy]

        subgraph "Frontend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä"
            Nginx[Nginx] --> Static[–°—Ç–∞—Ç–∏–∫–∞ React]
        end

        subgraph "Backend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä"
            Uvicorn[ASGI —Å–µ—Ä–≤–µ—Ä Uvicorn] --> App[FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ]
        end

        subgraph "–ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ"
            Volume[Mounted Volume]
            DB[(experts.db)]
            Volume -- —Å–æ–¥–µ—Ä–∂–∏—Ç --> DB
        end
    end

    User -- HTTPS --> LB
    LB -- "–ó–∞–ø—Ä–æ—Å—ã UI" --> Nginx
    Nginx --> Static
    LB -- "–ü—Ä–æ–∫—Å–∏—Ä—É–µ—Ç /api/*" --> Uvicorn
    App -- "–ß–∏—Ç–∞–µ—Ç –ø–∏—à–µ—Ç –≤ –ë–î" --> DB
    App -- "–û–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ AI" --> LLM_API[OpenRouter API]

    style Volume fill:#fdf,stroke:#333
```

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **üß† 8-—Ñ–∞–∑–Ω–∞—è Map-Resolve-Reduce –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π pipeline —Å –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π HIGH/MEDIUM –ø–æ—Å—Ç–æ–≤
- **üéØ –ú–Ω–æ–≥–æ–º–æ–¥–µ–ª—å–Ω–∞—è AI-—Å—Ç—Ä–∞—Ç–µ–≥–∏—è**: Qwen 2.5-72B (Map+Validation), Gemini 2.0 Flash (Reduce+Synthesis), GPT-4o-mini (Scoring+Matching)
- **üîç –£–º–Ω—ã–π —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫**: –ù–∞—Ö–æ–¥–∏—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –ø–æ—Å—Ç—ã –ø–æ —Å–º—ã—Å–ª—É, –∞ –Ω–µ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
- **üìä Medium Posts Hybrid Reranking**: –ì–∏–±—Ä–∏–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å –ø–æ—Ä–æ–≥–æ–º ‚â•0.7 –∏ —Ç–æ–ø-5 –æ—Ç–±–æ—Ä–æ–º
- **üí¨ Comment Drift Analysis**: –û—Ç–¥–µ–ª—å–Ω—ã–π pipeline –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∏ –æ–±—Å—É–∂–¥–µ–Ω–∏–π
- **üåê Language Validation Phase**: –í–∞–ª–∏–¥–∞—Ü–∏—è —è–∑—ã–∫–∞ –æ—Ç–≤–µ—Ç–∞ –∏ –ø–µ—Ä–µ–≤–æ–¥ RU‚ÜíEN –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- **‚ö° –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è**: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–µ—Ä–µ–∑ Server-Sent Events
- **üë• –ú—É–ª—å—Ç–∏-—ç–∫—Å–ø–µ—Ä—Ç–Ω–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `expert_id` –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Telegram –∫–∞–Ω–∞–ª–æ–≤

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.11+
- Node.js 18+
- OpenRouter API –∫–ª—é—á

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/andreysazonov/Experts_panel.git
cd Experts_panel

# 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env, –¥–æ–±–∞–≤–∏–≤ OPENROUTER_API_KEY

# 3. –ó–∞–ø—É—Å–∫ –±—ç–∫–µ–Ω–¥–∞
cd backend
pip install -r requirements.txt
python3 -m uvicorn src.api.main:app --reload --port 8000

# 4. –ó–∞–ø—É—Å–∫ —Ñ—Ä–æ–Ω–µ–Ω–¥–∞ (–≤ –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
cd frontend
npm install
npm run dev
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É http://localhost:3001

## üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏

### –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ Telegram

```bash
# –ò–º–ø–æ—Ä—Ç JSON —Ñ–∞–π–ª–∞ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º expert_id
cd backend && python -m src.data.json_parser data/exports/channel.json --expert-id refat

# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
cd backend && python -m src.data.comment_collector

# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Telegram –∫–∞–Ω–∞–ª–∞
cd backend && python sync_channel.py --dry-run --expert-id refat
cd backend && python sync_channel.py --expert-id refat
```

### –ê–Ω–∞–ª–∏–∑ drift –∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

```bash
# –ê–Ω–∞–ª–∏–∑ drift –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å–ª–µ —Ä–µ–∏–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö)
cd backend && python analyze_drift.py

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
cd backend && python -m src.models.database  # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (init/reset/drop)

# –°–æ–∑–¥–∞–Ω–∏–µ –∏ –º–∏–≥—Ä–∞—Ü–∏—è SQLite –±–∞–∑—ã
sqlite3 data/experts.db < schema.sql
sqlite3 data/experts.db < backend/migrations/001_create_comment_group_drift.sql
sqlite3 data/experts.db < backend/migrations/002_add_sync_state.sql
sqlite3 data/experts.db < backend/migrations/003_add_expert_id.sql
```

## üìö –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

### –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å

```bash
curl -X POST http://localhost:8000/api/v1/query \
  -H "Content-Type: application/json" \
  -d '{"query": "–í–∞—à –≤–æ–ø—Ä–æ—Å", "stream_progress": false}'
```

### –ó–∞–ø—Ä–æ—Å –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —ç–∫—Å–ø–µ—Ä—Ç—É

```bash
curl -X POST http://localhost:8000/api/v1/query \
  -H "Content-Type: application/json" \
  -d '{"query": "–í–∞—à –≤–æ–ø—Ä–æ—Å", "expert_filter": ["refat"], "stream_progress": false}'
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
OPENROUTER_API_KEY=your-key-here
DATABASE_URL=sqlite:///data/experts.db

# Medium Posts Reranking
MEDIUM_SCORE_THRESHOLD=0.7
MEDIUM_MAX_SELECTED_POSTS=5
MEDIUM_MAX_POSTS=50

# –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
MAX_POSTS_LIMIT=500
CHUNK_SIZE=20
REQUEST_TIMEOUT=300
```

## üèóÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend**: FastAPI, SQLAlchemy 2.0, Pydantic v2
- **Frontend**: React 18, TypeScript, Vite
- **Database**: SQLite / PostgreSQL —Å –ø–æ–ª–Ω–æ–π `expert_id` –∏–∑–æ–ª—è—Ü–∏–µ–π
- **AI Models**: OpenRouter API (Qwen 2.5-72B, Gemini 2.0 Flash, GPT-4o-mini)
- **Deployment**: Docker, Fly.io

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
backend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ models/       # SQLAlchemy –º–æ–¥–µ–ª–∏ —Å expert_id –ø–æ–ª—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ services/     # Map-Resolve-Reduce pipeline
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ medium_scoring_service.py    # Medium Posts Reranking
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ language_validation_service.py # Language Validation
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ drift_analysis_service.py    # Comment Drift Analysis
‚îÇ   ‚îú‚îÄ‚îÄ api/          # FastAPI —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ data/         # –ò–º–ø–æ—Ä—Ç –∏ –ø–∞—Ä—Å–∏–Ω–≥ Telegram –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ utils/        # –£—Ç–∏–ª–∏—Ç—ã –∏ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä—ã
‚îú‚îÄ‚îÄ prompts/          # LLM –ø—Ä–æ–º–ø—Ç—ã (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–¥ –º–æ–¥–µ–ª–∏)
‚îú‚îÄ‚îÄ migrations/       # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î —Å expert_id –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
‚îî‚îÄ‚îÄ tests/            # –¢–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏

frontend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/   # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å expertId –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
‚îÇ   ‚îú‚îÄ‚îÄ services/     # API –∫–ª–∏–µ–Ω—Ç —Å SSE —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–º
‚îÇ   ‚îî‚îÄ‚îÄ types/        # TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îî‚îÄ‚îÄ public/           # –°—Ç–∞—Ç–∏–∫–∞

data/
‚îú‚îÄ‚îÄ exports/          # Telegram JSON —Ñ–∞–π–ª—ã –ø–æ expert_id
‚îî‚îÄ‚îÄ experts.db        # SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –º—É–ª—å—Ç–∏-—ç–∫—Å–ø–µ—Ä—Ç–Ω–æ—Å—Ç—å—é
```

### –ú—É–ª—å—Ç–∏-—ç–∫—Å–ø–µ—Ä—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **–ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: –ö–∞–∂–¥—ã–π –ø–æ—Å—Ç, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞ –∏–º–µ–µ—Ç `expert_id`
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –í—Å–µ —ç–∫—Å–ø–µ—Ä—Ç—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –õ—ë–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö Telegram –∫–∞–Ω–∞–ª–æ–≤ —á–µ—Ä–µ–∑ `expert_id`
- **SSE —Ç—Ä–µ–∫–∏–Ω–≥**: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ progress events

## üöÄ –ü—Ä–æ–¥–∞–∫—à–µ–Ω —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Fly.io

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Fly CLI
curl -L https://fly.io/install.sh | sh
fly auth login

# 2. –î–µ–ø–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
fly deploy

# 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤
fly secrets set OPENROUTER_API_KEY=your-key-here

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl https://experts-panel.fly.dev/health
```

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [Pipeline Architecture](docs/pipeline-architecture.md)
- [Multi-Expert Setup](docs/multi-expert-guide.md)
- [API Documentation](http://localhost:8000/docs)
- [Development Guide](docs/development-guide.md)

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add some AmazingFeature'`)
4. Push –≤ branch (`git push origin feature/AmazingFeature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- [OpenRouter](https://openrouter.ai/) –∑–∞ –¥–æ—Å—Ç—É–ø –∫ –ø–µ—Ä–µ–¥–æ–≤—ã–º AI –º–æ–¥–µ–ª—è–º
- [FastAPI](https://fastapi.tiangolo.com/) –∑–∞ –º–æ—â–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- [React](https://reactjs.org/) –∑–∞ –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–π UI —Ñ—Ä–µ–π–º–≤–æ—Ä–∫

---

**Experts Panel** ‚Äî –ø—Ä–µ–≤—Ä–∞—â–∞–µ–º —Ö–∞–æ—Å Telegram –∫–∞–Ω–∞–ª–æ–≤ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞–Ω–∏—è üí°
# Task: Medium Posts Scoring Service (Hybrid LLM + Code)

## üéØ –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å –≥–∏–±—Ä–∏–¥–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Ä–µ-—Ä–∞–Ω–∫–∏–Ω–≥–∞ MEDIUM –ø–æ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ GPT-4o-mini, –≥–¥–µ LLM –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç, –∞ –∫–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ.

## üí° –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥: LLM –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç + –∫–æ–¥ —Ä–µ—à–∞–µ—Ç

**‚úÖ –õ—É—á—à–∏–π –∏–∑ –¥–≤—É—Ö –º–∏—Ä–æ–≤:** –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã LLM (—Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞) –∏ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ (–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ —Ä–µ—à–µ–Ω–∏—è).

```
Map ‚Üí Filter ‚Üí [MEDIUM Scoring] ‚Üí Code Selection ‚Üí Resolve ‚Üí Reduce
```

**–ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è:** LLM —Å—Ç–∞–≤–∏—Ç –æ—Ü–µ–Ω–∫–∏ –≤—Å–µ–º MEDIUM –ø–æ—Å—Ç–∞–º, –∞ –∫–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–∏—Ö –æ—Ü–µ–Ω–æ–∫.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥:

1. **LLM –∑–∞–¥–∞—á–∞ (–æ—Ü–µ–Ω–∫–∞):** "–û—Ü–µ–Ω–∏ –∫–∞–∂–¥—ã–π Medium –ø–æ—Å—Ç –ø–æ —à–∫–∞–ª–µ 1-10, –Ω–∞—Å–∫–æ–ª—å–∫–æ –æ–Ω –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è HIGH –ø–æ—Å—Ç–æ–≤"
2. **LLM —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å –æ—Ü–µ–Ω–∫–∞–º–∏ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
3. **–ö–æ–¥ –∑–∞–¥–∞—á–∞ (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è):** –ü—Ä–∏–º–µ–Ω—è–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—É—é –ª–æ–≥–∏–∫—É –∫ –æ—Ü–µ–Ω–∫–∞–º

### –ü—Ä–∏–º–µ—Ä LLM –æ—Ç–≤–µ—Ç–∞:
```json
{
  "ranked_posts": [
    {"post_id": 123, "score": 9, "reason": "–î–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–∏–º–µ—Ä..."},
    {"post_id": 456, "score": 8, "reason": "–ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—É—é –º–µ—Ç–æ–¥–∏–∫—É..."},
    {"post_id": 789, "score": 4, "reason": "–õ–∏—à—å –∫–æ—Å–≤–µ–Ω–Ω–æ –∫–∞—Å–∞–µ—Ç—Å—è —Ç–µ–º—ã..."},
    ...
  ]
}
```

### –í–∞—Ä–∏–∞–Ω—Ç—ã –ª–æ–≥–∏–∫–∏ –æ—Ç–±–æ—Ä–∞ –≤ –∫–æ–¥–µ:
- **–ü—Ä–æ—Å—Ç–æ–π –ø–æ—Ä–æ–≥:** –í–∑—è—Ç—å –≤—Å–µ –ø–æ—Å—Ç—ã —Å `score >= 7`
- **–ü–æ—Ä–æ–≥ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º:** –í–∑—è—Ç—å –ø–æ—Å—Ç—ã —Å `score >= 7`, –Ω–æ –Ω–µ –±–æ–ª–µ–µ 10 —à—Ç—É–∫
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–æ—Ä–æ–≥:** –ë—Ä–∞—Ç—å –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –æ—Ü–µ–Ω–∫–∞ –Ω–µ —É–ø–∞–¥–µ—Ç —Ä–µ–∑–∫–æ
- **–¢–æ–ø-K (MVP):** –í–∑—è—Ç—å –ª—É—á—à–∏–µ K –ø–æ—Å—Ç–æ–≤

### –ü–æ—á–µ–º—É –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ ‚Äî –ª—É—á—à–∏–π:
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:** LLM —Ä–µ—à–∞–µ—Ç –ø—Ä–æ—Å—Ç—É—é –∑–∞–¥–∞—á—É –æ—Ü–µ–Ω–∫–∏, —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ
- ‚úÖ **–ö–æ–Ω—Ç—Ä–æ–ª—å:** –ö–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–æ–≤
- ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å:** –ú–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –ª–æ–≥–∏–∫—É –æ—Ç–±–æ—Ä–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–º–ø—Ç–∞
- ‚úÖ **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç:** –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ LLM –¥–ª—è –æ—Ü–µ–Ω–∫–∏
- ‚úÖ **–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å:** –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤ –∫–æ–¥–µ

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–¢–µ–∫—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ MEDIUM –ø–æ—Å—Ç—ã –≤ pipeline, —á—Ç–æ –º–æ–∂–µ—Ç:
- –£–≤–µ–ª–∏—á–∏–≤–∞—Ç—å —à—É–º –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
- –°–Ω–∏–∂–∞—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤
- –£–≤–µ–ª–∏—á–∏–≤–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–æ–≤ –≤ Reduce —Ñ–∞–∑–µ

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
1. **`MediumScoringService`** - —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ü–µ–Ω–∫–∏ MEDIUM –ø–æ—Å—Ç–æ–≤
2. **–ü—Ä–æ–º–ø—Ç –¥–ª—è –æ—Ü–µ–Ω–∫–∏** - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è GPT-4o-mini
3. **–õ–æ–≥–∏–∫–∞ –æ—Ç–±–æ—Ä–∞** - –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤ –∫–æ–¥–µ
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ pipeline** - –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è `simplified_query_endpoint.py`

### –ü–æ—Ä—è–¥–æ–∫ —Ä–∞–±–æ—Ç—ã:
1. **Map —Ñ–∞–∑–∞** (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) ‚Üí HIGH/MEDIUM/LOW –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
2. **Filter —Ñ–∞–∑–∞** ‚Üí —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ HIGH –∏ MEDIUM –ø–æ—Å—Ç—ã
3. **Scoring —Ñ–∞–∑–∞** (–Ω–æ–≤–∞—è) ‚Üí GPT-4o-mini –æ—Ü–µ–Ω–∫–∞ –≤—Å–µ—Ö MEDIUM –ø–æ—Å—Ç–æ–≤
4. **Selection —Ñ–∞–∑–∞** ‚Üí –∫–æ–¥ –≤—ã–±–∏—Ä–∞–µ—Ç –ª—É—á—à–∏–µ –ø–æ—Å—Ç—ã –ø–æ –æ—Ü–µ–Ω–∫–∞–º
5. **Resolve —Ñ–∞–∑–∞** ‚Üí –ø–æ–∏—Å–∫ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ –¥–ª—è HIGH + –≤—ã–±—Ä–∞–Ω–Ω—ã–µ MEDIUM
6. **Reduce —Ñ–∞–∑–∞** ‚Üí —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å–∏–Ω—Ç–µ–∑

## üìä –ê–Ω–∞–ª–∏–∑ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –°—Ç–æ–∏–º–æ—Å—Ç—å GPT-4o-mini:
- Input: $0.15 / 1M tokens
- Output: $0.60 / 1M tokens

### –ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞ –Ω–∞ 1 —ç–∫—Å–ø–µ—Ä—Ç–∞:
```
MEDIUM –ø–æ—Å—Ç–æ–≤: 15
–¢–æ–∫–µ–Ω–æ–≤ –Ω–∞ –ø–æ—Å—Ç: ~300
Input: 4,500 —Ç–æ–∫–µ–Ω–æ–≤ ‚Üí $0.0007
Output: 200 —Ç–æ–∫–µ–Ω–æ–≤ ‚Üí $0.0001
–ò—Ç–æ–≥–æ: ~$0.001 –∑–∞ —ç–∫—Å–ø–µ—Ä—Ç–∞
```

**–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:** ~$0.003 –∑–∞ 3 —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ (–∫–æ–ø–µ–π–∫–∏!)

### –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
- +5-10 —Å–µ–∫—É–Ω–¥ –∫ –æ–±—â–µ–º—É –≤—Ä–µ–º–µ–Ω–∏
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –≤—Å–µ—Ö —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
- –ù–µ–∑–∞–º–µ–¥–ª–∏—Ç–µ–ª—å–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### 1. MediumScoringService
**–§–∞–π–ª:** `backend/src/services/medium_scoring_service.py`

```python
class MediumScoringService:
    def __init__(self, api_key: str, model: str = "gpt-4o-mini")
    self.client = create_openrouter_client(api_key=api_key)
    self.model = convert_model_name(model)

    async def score_medium_posts(
        self,
        medium_posts: List[Dict],
        high_posts_context: str,
        query: str,
        expert_id: str
    ) -> List[Dict]:
        """Score all medium posts using GPT-4o-mini"""
```

### 2. –ü—Ä–æ–º–ø—Ç –¥–ª—è –æ—Ü–µ–Ω–∫–∏
**–§–∞–π–ª:** `backend/prompts/medium_scoring_prompt.txt`

```
You are analyzing MEDIUM-relevant posts to complement HIGH-relevant posts.

User query: {query}
HIGH posts summary: {high_posts_context}

MEDIUM posts to evaluate:
{medium_posts}

Rate each post on a scale of 1-10 based on how valuable it would be to complement HIGH posts.

Consider:
1. Information gaps in HIGH posts
2. Additional examples or case studies
3. Alternative perspectives
4. Technical details missing from HIGH posts
5. Related topics not covered in HIGH posts

Return JSON with all posts and their scores.
```

### 3. –õ–æ–≥–∏–∫–∞ –æ—Ç–±–æ—Ä–∞ –≤ –∫–æ–¥–µ
**–ú–µ—Å—Ç–æ:** `backend/src/api/simplified_query_endpoint.py`

```python
# –ü–æ—Å–ª–µ Map —Ñ–∞–∑—ã:
high_posts = [p for p in relevant_posts if p.get("relevance") == "HIGH"]
medium_posts = [p for p in relevant_posts if p.get("relevance") == "MEDIUM"]

# MVP: Top-K –≤—ã–±–æ—Ä–∫–∞
TOP_MEDIUM_POSTS = 5

# –ë—É–¥—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è: –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥
if medium_posts:
    scoring_service = MediumScoringService(api_key)

    # –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ HIGH –ø–æ—Å—Ç–æ–≤
    high_context = format_high_posts_context(high_posts)

    # Scoring
    scored_posts = await scoring_service.score_medium_posts(
        medium_posts=medium_posts,
        high_posts_context=high_context,
        query=request.query,
        expert_id=expert_id
    )

    # MVP: –ü—Ä–æ—Å—Ç–æ –±–µ—Ä–µ–º —Ç–æ–ø-K
    selected_medium_posts = scored_posts[:TOP_MEDIUM_POSTS]

    # Future: –ì–∏–±—Ä–∏–¥–Ω–∞—è –ª–æ–≥–∏–∫–∞
    # selected_medium_posts = select_posts_by_threshold(
    #     scored_posts,
    #     min_score=7,
    #     max_count=10
    # )

    # –û–±—ä–µ–¥–∏–Ω—è–µ–º HIGH + –≤—ã–±—Ä–∞–Ω–Ω—ã–µ MEDIUM
    filtered_posts = high_posts + selected_medium_posts
else:
    filtered_posts = high_posts
```

### 4. –ì–∏–±—Ä–∏–¥–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç–±–æ—Ä–∞ (Future)
```python
def select_posts_by_threshold(posts: List[Dict], min_score: int = 7, max_count: int = 10) -> List[Dict]:
    """Select posts based on score threshold and maximum count"""
    selected = []

    for post in posts:
        if post.get("score", 0) >= min_score:
            selected.append(post)
            if len(selected) >= max_count:
                break

    return selected
```

## üìã –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### MVP (–¢–µ–∫—É—â–∏–π —Å–ø—Ä–∏–Ω—Ç): –ñ–µ—Å—Ç–∫–∏–π –ª–∏–º–∏—Ç Top-K
- [ ] –°–æ–∑–¥–∞—Ç—å `MediumScoringService` —Å GPT-4o-mini
- [ ] –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–ø—Ç –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≤—Å–µ—Ö MEDIUM –ø–æ—Å—Ç–æ–≤
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç—É—é Top-K –≤—ã–±–æ—Ä–∫—É (K=5)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ pipeline
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π pipeline

### Future: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –æ—Ç–±–æ—Ä–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ—Ü–µ–Ω–∫–∞–º–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ—Ä–æ–≥–æ–≤—ã–π –≤—ã–±–æ—Ä (`score >= 7`)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (`max=10`)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ—Ä–æ–≥–∏
- [ ] A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

## üéØ –£—Å–ø–µ—à–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏

### –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
- –û—Ç–≤–µ—Ç—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –±–æ–ª–µ–µ –ø–æ–ª–Ω—ã–º–∏ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ –±–æ–≥–∞—Ç—ã–º–∏
- –°–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ã–µ —Å–≤—è–∑–∏ —á–µ—Ä–µ–∑ MEDIUM –ø–æ—Å—Ç—ã
- –í—ã—à–µ —Ç–æ—á–Ω–æ—Å—Ç—å –Ω–∞ —Å–ª–æ–∂–Ω—ã—Ö –º–Ω–æ–≥–æ–≥—Ä–∞–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
- +10-20% –ø–æ–ª–µ–∑–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ –≤ main_sources
- Cost increase < $0.01 –∑–∞ –∑–∞–ø—Ä–æ—Å
- Time increase < 15 —Å–µ–∫—É–Ω–¥
- –û—à–∏–±–∫–∞ API < 5%

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏:
- –í—Å–µ unit —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–µ –ª–æ–º–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π pipeline
- Graceful degradation –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –æ—Ü–µ–Ω–∫–∏

## üö® –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### –†–∏—Å–∫ 1: API –æ—à–∏–±–∫–∏ GPT-4o-mini
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** Retry –ª–æ–≥–∏–∫–∞, fallback –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤—Å–µ—Ö MEDIUM –ø–æ—Å—Ç–æ–≤

### –†–∏—Å–∫ 2: –ü–ª–æ—Ö–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ü–µ–Ω–∫–∏
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** –¢—â–∞—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞, A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–∏—Å–∫ 3: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Ä–µ–º–µ–Ω–∏

### –†–∏—Å–∫ 4: JSON –ø–∞—Ä—Å–∏–Ω–≥ –æ—à–∏–±–∫–∏
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º—ã, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [OpenRouter API docs](https://openrouter.ai/docs)
- [GPT-4o-mini documentation](https://platform.openai.com/docs/models/gpt-4o-mini)
- [RAG re-ranking best practices](https://arxiv.org/abs/2401.18087)

## üìä –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

### MVP Phase:
- [ ] MediumScoringService implementation (0/3)
- [ ] –ü—Ä–æ–º–ø—Ç –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (0/2)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ pipeline (0/2)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (0/1)

### Future Phase:
- [ ] –ì–∏–±—Ä–∏–¥–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç–±–æ—Ä–∞ (0/3)
- [ ] A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π (0/2)

**–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å:** 0/13 –∑–∞–¥–∞—á –≤—ã–ø–æ–ª–Ω–µ–Ω–æ

---

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π (—É–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –±–µ–∑ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π)
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è (–Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å, –Ω–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
**–í–ª–∏—è–Ω–∏–µ:** –í—ã—Å–æ–∫–æ–µ (–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤)
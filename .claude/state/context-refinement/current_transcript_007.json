[
  {
    "role": "assistant",
    "content": [
      {
        "type": "tool_use",
        "id": "toolu_01GCbzxNNr9KssJanTLU671w",
        "name": "Write",
        "input": {
          "file_path": "/Users/andreysazonov/Documents/Projects/Experts_panel/docs/add-new-expert-playbook.md",
          "content": "# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —ç–∫—Å–ø–µ—Ä—Ç–∞ - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π Playbook —Å Claude Code\n\n**–í–µ—Ä—Å–∏—è:** 3.0 (—Å –ø–æ–ª–Ω—ã–º —É—á—ë—Ç–æ–º –≤—Å–µ—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π —Å–∏—Å—Ç–µ–º—ã)\n**–î–∞—Ç–∞:** 2025-10-14\n**–¢–∏–ø –ø—Ä–æ—Ü–µ—Å—Å–∞:** –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Å Claude Code\n\n---\n\n## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û –ü–û–ù–Ø–¢–¨ –ü–ï–†–ï–î –ù–ê–ß–ê–õ–û–ú\n\n### –ü—Ä–æ–±–ª–µ–º–∞ channel_id vs telegram_message_id\n\n**–ì–õ–ê–í–ù–ê–Ø –û–ü–ê–°–ù–û–°–¢–¨:** –†–∞–∑–Ω—ã–µ Telegram –∫–∞–Ω–∞–ª—ã –∏–º–µ—é—Ç –ü–ï–†–ï–°–ï–ö–ê–Æ–©–ò–ï–°–Ø –¥–∏–∞–ø–∞–∑–æ–Ω—ã telegram_message_id!\n\n**–†–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∏–∑ —Å–∏—Å—Ç–µ–º—ã:**\n```\nrefat (channel_id: 2273349814):     –ø–æ—Å—Ç—ã #5, #6, #7, #8, #9...\nai_architect (channel_id: 2293112404): –ø–æ—Å—Ç—ã #2, #3, #4, #5, #6...\n                                                         ‚Üë\n                                              –ö–û–ù–§–õ–ò–ö–¢: –æ–±–∞ –∏–º–µ—é—Ç –ø–æ—Å—Ç #5!\n```\n\n**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ë–ï–ó —Ñ–∏–ª—å—Ç—Ä–∞ –ø–æ channel_id:**\n1. –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è ai_architect –ø–æ—Å—Ç #5\n2. SQL –∑–∞–ø—Ä–æ—Å: `SELECT * FROM posts WHERE telegram_message_id = 5`\n3. –ù–∞—Ö–æ–¥–∏—Ç –ü–ï–†–í–´–ô –ø–æ—Å—Ç —Å ID=5 (—ç—Ç–æ refat!)\n4. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ai_architect —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫ –ø–æ—Å—Ç—É refat\n5. **–û–®–ò–ë–ö–ê –ú–û–õ–ß–ê–õ–ò–í–ê–Ø** - –Ω–∏–∫–∞–∫–∏—Ö warnings, –≤—Å—ë –≤—ã–≥–ª—è–¥–∏—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ!\n\n**–ü–†–ê–í–ò–õ–û:** –õ—é–±–æ–π –∑–∞–ø—Ä–æ—Å —Å telegram_message_id –û–ë–Ø–ó–ê–ù –≤–∫–ª—é—á–∞—Ç—å channel_id —Ñ–∏–ª—å—Ç—Ä!\n\n---\n\n## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞\n\n–≠—Ç–æ –ø–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å Claude Code –ø–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –Ω–æ–≤–æ–≥–æ —ç–∫—Å–ø–µ—Ä—Ç–∞ –≤ —Å–∏—Å—Ç–µ–º—É. Claude Code –±—É–¥–µ—Ç:\n- –°–æ–∑–¥–∞–≤–∞—Ç—å todo —Å–ø–∏—Å–æ–∫ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞\n- –í—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏\n- –ó–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å —É –≤–∞—Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ\n- –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞\n- –í—ã—è–≤–ª—è—Ç—å –º–æ–ª—á–∞–ª–∏–≤—ã–µ –æ—à–∏–±–∫–∏ —á–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏\n\n**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 2-4 —á–∞—Å–∞ (–≤–∫–ª—é—á–∞—è drift analysis)\n**–¢—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** JSON —Ñ–∞–π–ª —ç–∫—Å–ø–æ—Ä—Ç–∞, Telegram API credentials, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —à–∞–≥–∞—Ö\n\n---\n\n## üéØ –ß—Ç–æ –±—É–¥–µ—Ç –¥–µ–ª–∞—Ç—å Claude Code\n\n1. –°–æ–∑–¥–∞—Å—Ç todo —Å–ø–∏—Å–æ–∫ —Å–æ –≤—Å–µ–º–∏ —à–∞–≥–∞–º–∏\n2. –ë—É–¥–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–∞–∂–¥—ã–π —à–∞–≥\n3. –ó–∞–ø—Ä–æ—Å–∏—Ç —É –≤–∞—Å –¥–∞–Ω–Ω—ã–µ –∫–æ–≥–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ\n4. –ü—Ä–æ–≤–µ—Ä–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞\n5. **–í—ã–ø–æ–ª–Ω–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –º–æ–ª—á–∞–ª–∏–≤—ã–µ –æ—à–∏–±–∫–∏** (cross-expert pollution, orphaned records)\n6. –û—Ç–∫–∞—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥—ë—Ç –Ω–µ —Ç–∞–∫\n\n---\n\n## üìù –î–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ Claude Code –∑–∞–ø—Ä–æ—Å–∏—Ç —É –≤–∞—Å\n\n### –ù–∞ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å–∞:\n1. **–ü—É—Ç—å –∫ JSON —Ñ–∞–π–ª—É** —ç–∫—Å–ø–æ—Ä—Ç–∞ –∫–∞–Ω–∞–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `data/exports/channel_export.json`)\n2. **expert_id** - –∫–æ—Ä–æ—Ç–∫–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä: `crypto_guru`)\n3. **expert_name** - –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä: \"Crypto Guru üöÄ\")\n4. **channel_username** - username –∫–∞–Ω–∞–ª–∞ –ë–ï–ó @ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `crypto_talks`)\n\n### –í–æ –≤—Ä–µ–º—è –∏–º–ø–æ—Ä—Ç–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ (–®–∞–≥ 4):\n1. **TELEGRAM_API_ID** - –∏–∑ https://my.telegram.org\n2. **TELEGRAM_API_HASH** - –∏–∑ https://my.telegram.org\n3. **–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞** - –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ Telegram\n4. **–ö–æ–¥ –∏–∑ SMS** - –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏\n\n### –ù–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —à–∞–≥–∞—Ö:\n- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –∏–º–ø–æ—Ä—Ç–æ–º\n- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º\n- –†–µ—à–µ–Ω–∏—è –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤\n\n---\n\n## üöÄ –ü–û–®–ê–ì–û–í–´–ô –ü–†–û–¶–ï–°–°\n\n### ‚úÖ –®–ê–ì 0: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ prerequisites\n\n**Claude Code —Å–¥–µ–ª–∞–µ—Ç:**\n```bash\n# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ backend –∏ frontend –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã\nlsof -ti:8000 && echo \"‚ùå Backend —Ä–∞–±–æ—Ç–∞–µ—Ç, –æ—Å—Ç–∞–Ω–æ–≤–∏ –µ–≥–æ!\" || echo \"‚úÖ Backend –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω\"\nlsof -ti:5173 && echo \"‚ùå Frontend —Ä–∞–±–æ—Ç–∞–µ—Ç, –æ—Å—Ç–∞–Ω–æ–≤–∏ –µ–≥–æ!\" || echo \"‚úÖ Frontend –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω\"\n\n# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –í–°–ï –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (–Ω–µ —Ç–æ–ª—å–∫–æ 008!)\necho \"–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π...\"\n\n# Migration 007: Composite unique –Ω–∞ posts\nsqlite3 data/experts.db \"\nSELECT COUNT(*) as has_migration_007\nFROM sqlite_master\nWHERE type='index'\n    AND sql LIKE '%telegram_message_id%channel_id%';\"\n\n# Migration 008: Composite unique –Ω–∞ comments\nsqlite3 data/experts.db \"\nSELECT COUNT(*) as has_migration_008\nFROM sqlite_master\nWHERE type='index'\n    AND name='idx_telegram_comment_post_unique';\"\n\n# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å foreign keys –≤–∫–ª—é—á–µ–Ω—ã\nsqlite3 data/experts.db \"PRAGMA foreign_keys;\"\n# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: 1\n\n# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å load_dotenv() –≤ main.py\ngrep -q \"load_dotenv()\" backend/src/api/main.py && echo \"‚úÖ load_dotenv –Ω–∞–π–¥–µ–Ω\" || echo \"‚ùå –ö–†–ò–¢–ò–ß–ù–û: –î–æ–±–∞–≤—å load_dotenv() –≤ main.py!\"\n\n# –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏—Ö —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ –∏ –∏—Ö channel_id\necho -e \"\\nüìä –¢–µ–∫—É—â–∏–µ —ç–∫—Å–ø–µ—Ä—Ç—ã –≤ —Å–∏—Å—Ç–µ–º–µ:\"\nsqlite3 data/experts.db \"\nSELECT\n    expert_id,\n    channel_id,\n    COUNT(*) as posts,\n    MIN(telegram_message_id) as first_msg,\n    MAX(telegram_message_id) as last_msg\nFROM posts\nGROUP BY expert_id, channel_id\nORDER BY expert_id;\"\n```\n\n**–ï—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã:**\n```bash\n# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é 007 –µ—Å–ª–∏ –Ω—É–∂–Ω–æ\n[ -f backend/migrations/007_fix_unique_telegram_message_id.sql ] && \\\n    sqlite3 data/experts.db < backend/migrations/007_fix_unique_telegram_message_id.sql\n\n# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é 008 (–∫—Ä–∏—Ç–∏—á–Ω–æ!)\nsqlite3 data/experts.db < backend/migrations/008_fix_comment_unique_constraint.sql\n```\n\n**‚ùì Claude Code —Å–ø—Ä–æ—Å–∏—Ç:** \"–í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã. –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º?\"\n\n---\n\n### ‚úÖ –®–ê–ì 1: Backup –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö\n\n**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û! –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —à–∞–≥ –ø–µ—Ä–µ–¥ –ª—é–±—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏!**\n\n**Claude Code —Å–¥–µ–ª–∞–µ—Ç:**\n```bash\n# –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É –¥–ª—è backup –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç\nmkdir -p data/backups\n\n# –°–æ–∑–¥–∞—Ç—å backup —Å –¥–∞—Ç–æ–π –∏ –≤—Ä–µ–º–µ–Ω–µ–º\nBACKUP_NAME=\"experts_backup_$(date +%Y%m%d_%H%M%S).db\"\nsqlite3 data/experts.db \".backup data/backups/$BACKUP_NAME\"\n\n# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å backup\nls -lh \"data/backups/$BACKUP_NAME\"\nsqlite3 \"data/backups/$BACKUP_NAME\" \"SELECT COUNT(*) FROM posts;\" && echo \"‚úÖ Backup —Å–æ–∑–¥–∞–Ω –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω\"\n\n# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–º—è backup –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ –æ—Ç–∫–∞—Ç–∞\necho \"$BACKUP_NAME\" > /tmp/last_backup.txt\n\n# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å drift analysis –µ—Å–ª–∏ –µ—Å—Ç—å\nsqlite3 data/experts.db \".dump comment_group_drift\" > \"data/backups/drift_${BACKUP_NAME%.db}.sql\"\necho \"‚úÖ Drift analysis —Å–æ—Ö—Ä–∞–Ω—ë–Ω –æ—Ç–¥–µ–ª—å–Ω–æ\"\n```\n\n**Verification:**\n- ‚úÖ Backup —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω\n- ‚úÖ –†–∞–∑–º–µ—Ä —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–º\n- ‚úÖ Backup –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫\n- ‚úÖ Drift backup —Å–æ–∑–¥–∞–Ω (–µ—Å–ª–∏ –±—ã–ª–∏ drift –∑–∞–ø–∏—Å–∏)\n\n---\n\n### ‚úÖ –®–ê–ì 2: –ò–º–ø–æ—Ä—Ç –ø–æ—Å—Ç–æ–≤ –∏–∑ JSON\n\n**‚ùì Claude Code –∑–∞–ø—Ä–æ—Å–∏—Ç —É –≤–∞—Å:**\n- –ü—É—Ç—å –∫ JSON —Ñ–∞–π–ª—É (–Ω–∞–ø—Ä–∏–º–µ—Ä: `data/exports/crypto_guru_history.json`)\n- expert_id –¥–ª—è –Ω–æ–≤–æ–≥–æ —ç–∫—Å–ø–µ—Ä—Ç–∞\n- expert_name –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è\n- channel_username –¥–ª—è Telegram —Å—Å—ã–ª–æ–∫\n\n**Claude Code —Å–¥–µ–ª–∞–µ—Ç:**\n```bash\ncd backend\n\n# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç\n[ -f \"../[JSON_FILE]\" ] && echo \"‚úÖ –§–∞–π–ª –Ω–∞–π–¥–µ–Ω\" || echo \"‚ùå –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω!\"\n\n# –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∞–π–ª–µ\necho \"–ê–Ω–∞–ª–∏–∑ JSON —Ñ–∞–π–ª–∞:\"\nhead -100 \"../[JSON_FILE]\" | grep -E '\"id\"|\"name\"|\"type\"' | head -5\n\n# –ò–º–ø–æ—Ä—Ç —Å —É–∫–∞–∑–∞–Ω–∏–µ–º expert_id\nuv run python -m src.data.json_parser \\\n  ../[JSON_FILE] \\\n  --expert-id [EXPERT_ID]\n\n# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å channel_id –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö —à–∞–≥–æ–≤ (–ö–†–ò–¢–ò–ß–ù–û!)\nCHANNEL_ID=$(sqlite3 ../data/experts.db \"SELECT DISTINCT channel_id FROM posts WHERE expert_id='[EXPERT_ID]' LIMIT 1;\")\necho \"Channel ID: $CHANNEL_ID\"\necho \"$CHANNEL_ID\" > /tmp/new_expert_channel_id.txt\n\n# –ö–†–ò–¢–ò–ß–ù–û: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å channel_id\nsqlite3 ../data/experts.db \"\nSELECT expert_id, channel_id, COUNT(*) as conflicts\nFROM posts\nWHERE channel_id = '$CHANNEL_ID'\nGROUP BY expert_id, channel_id;\"\n```\n\n**‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:\n- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è Telegram entities –≤ markdown —Ñ–æ—Ä–º–∞—Ç —á–µ—Ä–µ–∑ `entities_to_markdown_from_json()`\n- –°–æ–∑–¥–∞–Ω–∏–µ Link –∑–∞–ø–∏—Å–µ–π –¥–ª—è REPLY/FORWARD/MENTION —Å–≤—è–∑–µ–π\n- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ channel_id –∏–∑ JSON —Ñ–∞–π–ª–∞\n\n**Verification (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è):**\n```bash\n# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤\nsqlite3 data/experts.db \"SELECT COUNT(*) as posts FROM posts WHERE expert_id='[EXPERT_ID]';\"\n\n# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å channel_id —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å (–ö–†–ò–¢–ò–ß–ù–û!)\nsqlite3 data/experts.db \"\nSELECT\n    channel_id,\n    COUNT(DISTINCT expert_id) as expert_count,\n    GROUP_CONCAT(DISTINCT expert_id) as experts\nFROM posts\nWHERE channel_id = '$CHANNEL_ID'\nGROUP BY channel_id\nHAVING expert_count > 1;\"\n# –î–û–õ–ñ–ù–û –ë–´–¢–¨ –ü–£–°–¢–û! –ï—Å–ª–∏ –Ω–µ—Ç - channel_id –∫–æ–Ω—Ñ–ª–∏–∫—Ç!\n\n# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω telegram_message_id\nsqlite3 data/experts.db \"\nSELECT\n    MIN(telegram_message_id) as min_id,\n    MAX(telegram_message_id) as max_id,\n    COUNT(DISTINCT telegram_message_id) as unique_ids\nFROM posts\nWHERE expert_id='[EXPERT_ID]';\"\n\n# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ —ç–∫—Å–ø–µ—Ä—Ç–∞\nsqlite3 data/experts.db \"\nSELECT telegram_message_id, COUNT(*) as cnt\nFROM posts\nWHERE expert_id='[EXPERT_ID]'\nGROUP BY telegram_message_id, channel_id\nHAVING cnt > 1;\"\n# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ!\n\n# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –ø–æ—Å—Ç–æ–≤ —Å markdown\nsqlite3 data/experts.db \"\nSELECT\n    telegram_message_id,\n    SUBSTR(message_text, 1, 100) as preview,\n    CASE\n        WHEN message_text LIKE '%[%](%)%' THEN '‚úÖ Has markdown links'\n        WHEN message_text LIKE '%**%**%' THEN '‚úÖ Has bold'\n        WHEN message_text LIKE '%`%`%' THEN '‚úÖ Has code'\n        ELSE '‚ö™ Plain text'\n    END as markdown_status\nFROM posts\nWHERE expert_id='[EXPERT_ID]'\nORDER BY created_at DESC\nLIMIT 5;\"\n```\n\n**‚ö†Ô∏è Claude Code –∑–∞–ø–æ–º–Ω–∏—Ç channel_id –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö —à–∞–≥–æ–≤!**\n\n---\n\n### ‚úÖ –®–ê–ì 3: –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –º–æ–¥–µ–ª–µ–π\n\n**Claude Code –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç** `backend/src/api/models.py`:\n\n1. –í —Ñ—É–Ω–∫—Ü–∏—é `get_expert_name()` (–æ–∫–æ–ª–æ —Å—Ç—Ä–æ–∫–∏ 480) –¥–æ–±–∞–≤–∏—Ç:\n```python\n'[EXPERT_ID]': '[EXPERT_NAME]'\n```\n\n2. –í —Ñ—É–Ω–∫—Ü–∏—é `get_channel_username()` (–æ–∫–æ–ª–æ —Å—Ç—Ä–æ–∫–∏ 489) –¥–æ–±–∞–≤–∏—Ç:\n```python\n'[EXPERT_ID]': '[CHANNEL_USERNAME]'\n```\n\n**Verification:**\n```bash\ncd backend\n\n# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å Python\npython -c \"\nfrom src.api.models import get_expert_name, get_channel_username\nprint(f'Expert: {get_expert_name(\\\"[EXPERT_ID]\\\")}')\nprint(f'Channel: @{get_channel_username(\\\"[EXPERT_ID]\\\")}')\n\" && echo \"‚úÖ Helper —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç\"\n\n# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è\nuv run python -c \"\nfrom src.api.models import get_expert_name, get_channel_username\nassert get_expert_name('[EXPERT_ID]') == '[EXPERT_NAME]', 'Wrong expert name!'\nassert get_channel_username('[EXPERT_ID]') == '[CHANNEL_USERNAME]', 'Wrong channel username!'\nprint('‚úÖ –í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã')\n\"\n```\n\n---\n\n### ‚úÖ –®–ê–ì 4: –ò–º–ø–æ—Ä—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∏–∑ Telegram API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)\n\n**‚ùì Claude Code —Å–ø—Ä–æ—Å–∏—Ç:** \"–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–µ–π—á–∞—Å? (–º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø–æ–∑–∂–µ)\"\n\n–ï—Å–ª–∏ –î–ê:\n\n**‚ùì Claude Code –∑–∞–ø—Ä–æ—Å–∏—Ç —É –≤–∞—Å:**\n- TELEGRAM_API_ID\n- TELEGRAM_API_HASH\n- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ channel_username\n\n**Claude Code —Å–¥–µ–ª–∞–µ—Ç:**\n\n1. **–°–æ–∑–¥–∞—Å—Ç –≤—Ä–µ–º–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é —Å–∫—Ä–∏–ø—Ç–∞** —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º channel_id:\n```bash\ncd backend\n\n# –ó–∞–≥—Ä—É–∑–∏—Ç—å channel_id –∏–∑ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞\nCHANNEL_ID=$(cat /tmp/new_expert_channel_id.txt)\necho \"–ë—É–¥–µ–º –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è channel_id: $CHANNEL_ID\"\n\n# –°–æ–∑–¥–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º channel_id\ncp src/data/telegram_comments_fetcher.py src/data/telegram_comments_fetcher_temp.py\n\n# –ó–∞–º–µ–Ω–∏—Ç—å –í–°–ï –≤—Ö–æ–∂–¥–µ–Ω–∏—è —Ö–∞—Ä–¥–∫–æ–¥–∞ –Ω–∞ –Ω—É–∂–Ω—ã–π channel_id\nsed -i \"s/Post.channel_id == '2293112404'/Post.channel_id == '$CHANNEL_ID'/g\" src/data/telegram_comments_fetcher_temp.py\n\n# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∑–∞–º–µ–Ω–∞ –ø—Ä–æ—à–ª–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ\ngrep \"Post.channel_id == '$CHANNEL_ID'\" src/data/telegram_comments_fetcher_temp.py | wc -l\n# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: 2 (–¥–≤–µ –∑–∞–º–µ–Ω—ã)\n\necho \"‚úÖ –í—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –≥–æ—Ç–æ–≤ —Å channel_id: $CHANNEL_ID\"\n```\n\n2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç .env –∏ –¥–æ–±–∞–≤–∏—Ç credentials:**\n```bash\n# –î–æ–±–∞–≤–∏—Ç—å –≤ .env –µ—Å–ª–∏ –Ω–µ—Ç\ngrep -q \"TELEGRAM_API_ID\" .env || echo \"TELEGRAM_API_ID=[API_ID]\" >> .env\ngrep -q \"TELEGRAM_API_HASH\" .env || echo \"TELEGRAM_API_HASH=[API_HASH]\" >> .env\n\n# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å channel –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞\nexport TELEGRAM_CHANNEL=\"[CHANNEL_USERNAME]\"\necho \"Channel –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞: $TELEGRAM_CHANNEL\"\n```\n\n3. **–ó–∞–ø—É—Å—Ç–∏—Ç –∏–º–ø–æ—Ä—Ç:**\n```bash\n# –ó–∞–ø–æ–º–Ω–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏\nIMPORT_START=$(date +\"%Y-%m-%d %H:%M:%S\")\n\n# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç\nuv run python -m src.data.telegram_comments_fetcher_temp\n```\n\n**‚ùì Claude Code –ø–æ–ø—Ä–æ—Å–∏—Ç:** \"–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ SMS –∫–æ–≥–¥–∞ Telegram –µ–≥–æ –ø—Ä–∏—à–ª—ë—Ç\"\n\n4. **–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É–¥–∞–ª–∏—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª:**\n```bash\nrm src/data/telegram_comments_fetcher_temp.py\necho \"‚úÖ –í—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —É–¥–∞–ª—ë–Ω\"\n```\n\n**Verification (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏):**\n```bash\n# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏\nsqlite3 data/experts.db \"\nSELECT\n    COUNT(DISTINCT c.comment_id) as total_comments,\n    COUNT(DISTINCT c.post_id) as posts_with_comments\nFROM comments c\nJOIN posts p ON c.post_id = p.post_id\nWHERE p.expert_id='[EXPERT_ID]';\"\n\n# –ö–†–ò–¢–ò–ß–ù–û: Cross-expert pollution –ø—Ä–æ–≤–µ—Ä–∫–∞ #1\n# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ù–ï–¢ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –∫ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É —ç–∫—Å–ø–µ—Ä—Ç—É\nsqlite3 data/experts.db \"\nWITH recent_comments AS (\n    SELECT\n        c.comment_id,\n        c.comment_text,\n        c.author_name,\n        p.expert_id as post_expert,\n        p.telegram_message_id\n    FROM comments c\n    JOIN posts p ON c.post_id = p.post_id\n    WHERE c.created_at > '$IMPORT_START'\n)\nSELECT\n    COUNT(*) as wrong_assignments,\n    GROUP_CONCAT(DISTINCT post_expert) as affected_experts\nFROM recent_comments\nWHERE post_expert != '[EXPERT_ID]';\"\n# MUST return: 0|NULL\n\n# –ö–†–ò–¢–ò–ß–ù–û: Cross-expert pollution –ø—Ä–æ–≤–µ—Ä–∫–∞ #2\n# –î–µ—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –µ—Å–ª–∏ –±—ã–ª–∏ –Ω–∞–π–¥–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã\nsqlite3 data/experts.db \"\nSELECT\n    c.telegram_comment_id,\n    c.author_name,\n    p.expert_id as assigned_to_expert,\n    p.telegram_message_id as assigned_to_post,\n    SUBSTR(c.comment_text, 1, 50) as comment_preview\nFROM comments c\nJOIN posts p ON c.post_id = p.post_id\nWHERE c.created_at > '$IMPORT_START'\n    AND p.expert_id != '[EXPERT_ID]'\nLIMIT 10;\"\n# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ü–£–°–¢–û!\n\n# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ —Å markdown\nsqlite3 data/experts.db \"\nSELECT\n    c.telegram_comment_id,\n    c.author_name,\n    SUBSTR(c.comment_text, 1, 60) as preview,\n    CASE\n        WHEN c.comment_text LIKE '%[%](%)%' THEN '‚úÖ Has links'\n        WHEN c.comment_text LIKE '%@%' THEN '‚úÖ Has mentions'\n        ELSE '‚ö™ Plain text'\n    END as markdown\nFROM comments c\nJOIN posts p ON c.post_id = p.post_id\nWHERE p.expert_id='[EXPERT_ID]'\nORDER BY c.created_at DESC\nLIMIT 5;\"\n```\n\n---\n\n### ‚úÖ –®–ê–ì 5: –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å–∏ –¥–ª—è drift analysis\n\n**Claude Code —Å–¥–µ–ª–∞–µ—Ç:**\n```bash\n# –ü–æ–¥—Å—á–∏—Ç–∞—Ç—å —Å–∫–æ–ª—å–∫–æ –ø–æ—Å—Ç–æ–≤ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏\nPOSTS_WITH_COMMENTS=$(sqlite3 data/experts.db \"\nSELECT COUNT(DISTINCT c.post_id)\nFROM comments c\nJOIN posts p ON c.post_id = p.post_id\nWHERE p.expert_id = '[EXPERT_ID]';\")\n\necho \"–ù–∞–π–¥–µ–Ω–æ $POSTS_WITH_COMMENTS –ø–æ—Å—Ç–æ–≤ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏\"\n\n# –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å–∏ drift analysis\nsqlite3 data/experts.db \"\nINSERT INTO comment_group_drift (post_id, has_drift, drift_topics, analyzed_at, analyzed_by, expert_id)\nSELECT\n    p.post_id,\n    0 as has_drift,\n    NULL as drift_topics,\n    datetime('now') as analyzed_at,\n    'pending' as analyzed_by,\n    p.expert_id\nFROM posts p\nWHERE p.expert_id = '[EXPERT_ID]'\n  AND p.post_id IN (\n    SELECT DISTINCT c.post_id FROM comments c WHERE c.post_id = p.post_id\n  )\n  AND p.post_id NOT IN (\n    SELECT post_id FROM comment_group_drift WHERE post_id = p.post_id\n  );\"\n\necho \"‚úÖ Drift –∑–∞–ø–∏—Å–∏ —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è $POSTS_WITH_COMMENTS –≥—Ä—É–ø–ø\"\n```\n\n**Verification:**\n```bash\n# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏\nsqlite3 data/experts.db \"\nSELECT\n    COUNT(*) as total_drift_groups,\n    SUM(CASE WHEN analyzed_by='pending' THEN 1 ELSE 0 END) as pending_analysis,\n    p.expert_id\nFROM comment_group_drift cgd\nJOIN posts p ON cgd.post_id = p.post_id\nWHERE p.expert_id='[EXPERT_ID]'\nGROUP BY p.expert_id;\"\n\n# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ expert_id –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–æ –≤—Å–µ—Ö –∑–∞–ø–∏—Å—è—Ö\nsqlite3 data/experts.db \"\nSELECT COUNT(*) as wrong_expert_drift\nFROM comment_group_drift cgd\nWHERE cgd.expert_id != '[EXPERT_ID]'\n  AND cgd.post_id IN (\n    SELECT post_id FROM posts WHERE expert_id='[EXPERT_ID]'\n  );\"\n# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: 0\n```\n\n---\n\n### ‚úÖ –®–ê–ì 6: –ó–∞–ø—É—Å—Ç–∏—Ç—å drift analysis (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)\n\n**‚ùì Claude Code —Å–ø—Ä–æ—Å–∏—Ç:** \"–ó–∞–ø—É—Å—Ç–∏—Ç—å drift analysis —Å–µ–π—á–∞—Å? (–∑–∞–π–º—ë—Ç 20-60 –º–∏–Ω—É—Ç)\"\n\n–ï—Å–ª–∏ –î–ê:\n\n**Claude Code –ø—Ä–æ–≤–µ—Ä–∏—Ç:**\n```bash\n# –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∞–≥–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç auto-detection (–ù–ï —Ö–∞—Ä–¥–∫–æ–¥!)\ngrep \"SELECT expert_id FROM posts WHERE post_id\" .claude/agents/drift-extraction.md && \\\n    echo \"‚úÖ Drift agent –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ (auto-detection)\" || \\\n    echo \"‚ùå –í–ù–ò–ú–ê–ù–ò–ï: Drift agent –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Ö–∞—Ä–¥–∫–æ–¥!\"\n\n# –ü–æ–∫–∞–∑–∞—Ç—å —Å–∫–æ–ª—å–∫–æ –≥—Ä—É–ø–ø –Ω—É–∂–Ω–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å\nsqlite3 data/experts.db \"\nSELECT\n    COUNT(*) as groups_to_analyze\nFROM comment_group_drift cgd\nJOIN posts p ON cgd.post_id = p.post_id\nWHERE p.expert_id='[EXPERT_ID]'\n    AND cgd.analyzed_by='pending';\"\n```\n\n**–í–∞—Ä–∏–∞–Ω—Ç—ã:**\n\n**A. –î–ª—è <50 –≥—Ä—É–ø–ø - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç:**\n```bash\ncd backend\npython analyze_drift.py --batch-size 10 --expert-id [EXPERT_ID]\n```\n\n**B. –î–ª—è >50 –≥—Ä—É–ø–ø - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:**\nClaude Code –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å drift-extraction –∞–≥–µ–Ω—Ç–æ–≤ –≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö.\n\n**Progress tracking:**\n```bash\n# Claude Code –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç\nwatch -n 300 'sqlite3 data/experts.db \"\nSELECT\n    p.expert_id,\n    COUNT(*) as total,\n    SUM(CASE WHEN cgd.analyzed_by != \\\"pending\\\" THEN 1 ELSE 0 END) as done,\n    SUM(CASE WHEN cgd.has_drift = 1 THEN 1 ELSE 0 END) as with_drift,\n    ROUND(100.0 * SUM(CASE WHEN cgd.analyzed_by != \\\"pending\\\" THEN 1 ELSE 0 END) / COUNT(*), 1) || \\\"%\\\" as progress\nFROM comment_group_drift cgd\nJOIN posts p ON cgd.post_id = p.post_id\nWHERE p.expert_id=\\\"[EXPERT_ID]\\\"\nGROUP BY p.expert_id;\"'\n```\n\n---\n\n### ‚úÖ –®–ê–ì 7: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è)\n\n**Claude Code –≤—ã–ø–æ–ª–Ω–∏—Ç –ü–û–õ–ù–£–Æ –ø—Ä–æ–≤–µ—Ä–∫—É —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏:**\n\n```bash\necho \"=== –§–ò–ù–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –î–ê–ù–ù–´–• ===\"\n\n# 1. –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞\nsqlite3 data/experts.db \"\nSELECT\n    '[EXPERT_ID]' as expert,\n    (SELECT COUNT(*) FROM posts WHERE expert_id='[EXPERT_ID]') as posts,\n    (SELECT COUNT(*) FROM comments c JOIN posts p ON c.post_id=p.post_id WHERE p.expert_id='[EXPERT_ID]') as comments,\n    (SELECT COUNT(*) FROM links WHERE source_post_id IN (SELECT post_id FROM posts WHERE expert_id='[EXPERT_ID]')) as links,\n    (SELECT COUNT(*) FROM comment_group_drift cgd JOIN posts p ON cgd.post_id=p.post_id WHERE p.expert_id='[EXPERT_ID]') as drift_groups,\n    (SELECT COUNT(*) FROM comment_group_drift cgd JOIN posts p ON cgd.post_id=p.post_id WHERE p.expert_id='[EXPERT_ID]' AND cgd.has_drift=1) as with_drift;\"\n\n# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å channel_id (–ö–†–ò–¢–ò–ß–ù–û!)\necho -e \"\\nüìä Channel ID —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å:\"\nsqlite3 data/experts.db \"\nSELECT\n    expert_id,\n    channel_id,\n    COUNT(*) as posts\nFROM posts\nGROUP BY expert_id, channel_id\nORDER BY expert_id;\"\n# –ö–∞–∂–¥—ã–π expert_id –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –£–ù–ò–ö–ê–õ–¨–ù–´–ô channel_id!\n\n# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ orphaned –∑–∞–ø–∏—Å–∏ (–≤—Å–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å 0!)\necho -e \"\\nüîç –ü—Ä–æ–≤–µ—Ä–∫–∞ orphaned –∑–∞–ø–∏—Å–µ–π:\"\nsqlite3 data/experts.db \"\n-- Orphaned comments\nSELECT 'Orphaned comments' as check_type, COUNT(*) as count\nFROM comments c\nLEFT JOIN posts p ON c.post_id = p.post_id\nWHERE p.post_id IS NULL\n\nUNION ALL\n\n-- Orphaned source links\nSELECT 'Orphaned source links', COUNT(*)\nFROM links l\nLEFT JOIN posts p ON l.source_post_id = p.post_id\nWHERE p.post_id IS NULL\n\nUNION ALL\n\n-- Orphaned target links\nSELECT 'Orphaned target links', COUNT(*)\nFROM links l\nLEFT JOIN posts p ON l.target_post_id = p.post_id\nWHERE p.post_id IS NULL\n\nUNION ALL\n\n-- Orphaned drift records\nSELECT 'Orphaned drift records', COUNT(*)\nFROM comment_group_drift cgd\nLEFT JOIN posts p ON cgd.post_id = p.post_id\nWHERE p.post_id IS NULL;\"\n\n# 4. Cross-expert pollution —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞\necho -e \"\\n‚ö†Ô∏è Cross-expert pollution –ø—Ä–æ–≤–µ—Ä–∫–∞:\"\nsqlite3 data/experts.db \"\n-- Comments assigned to wrong expert\nSELECT\n    'Comments to wrong expert' as issue,\n    COUNT(*) as count\nFROM comments c\nJOIN posts p ON c.post_id = p.post_id\nWHERE p.expert_id != '[EXPERT_ID]'\n    AND c.post_id IN (SELECT post_id FROM posts WHERE expert_id='[EXPERT_ID]')\n\nUNION ALL\n\n-- Drift records with wrong expert\nSELECT\n    'Drift with wrong expert',\n    COUNT(*)\nFROM comment_group_drift cgd\nWHERE cgd.expert_id != '[EXPERT_ID]'\n    AND cgd.post_id IN (SELECT post_id FROM posts WHERE expert_id='[EXPERT_ID]');\"\n# –í–°–ï –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑–∞—Ç—å 0!\n\n# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ foreign keys —Ä–∞–±–æ—Ç–∞—é—Ç\necho -e \"\\nüîó Foreign keys –ø—Ä–æ–≤–µ—Ä–∫–∞:\"\nsqlite3 data/experts.db \"PRAGMA foreign_key_check;\"\n# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ (–Ω–µ—Ç –Ω–∞—Ä—É—à–µ–Ω–∏–π)\n```\n\n**Checklist:**\n- ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –º–µ—Å—Ç–µ\n- ‚úÖ channel_id —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –¥–ª—è —ç–∫—Å–ø–µ—Ä—Ç–∞\n- ‚úÖ –ù–µ—Ç orphaned –∑–∞–ø–∏—Å–µ–π (–≤—Å–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç 0)\n- ‚úÖ –ù–µ—Ç cross-expert pollution (–≤—Å–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç 0)\n- ‚úÖ Foreign keys —Ü–µ–ª–æ—Å—Ç–Ω—ã\n- ‚úÖ Drift analysis –∑–∞–≤–µ—Ä—à—ë–Ω (–µ—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–ª–∏)\n\n---\n\n### ‚úÖ –®–ê–ì 8: –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –∫ API\n\n**Claude Code –∑–∞–ø—É—Å—Ç–∏—Ç backend –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç:**\n\n```bash\n# –ó–∞–ø—É—Å—Ç–∏—Ç—å backend –≤ —Ñ–æ–Ω–µ\ncd backend && uv run uvicorn src.api.main:app --reload --port 8000 &\nBACKEND_PID=$!\nsleep 5\n\n# Health check\ncurl -s http://localhost:8000/health | jq '{status, database, openai_configured}'\n# openai_configured –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å true!\n\n# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –¢–û–õ–¨–ö–û –∫ –Ω–æ–≤–æ–º—É —ç–∫—Å–ø–µ—Ä—Ç—É\ncurl -X POST http://localhost:8000/api/v1/query \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"query\": \"–†–∞—Å—Å–∫–∞–∂–∏ –æ —Å–µ–±–µ –∏ —Å–≤–æ—ë–º –∫–∞–Ω–∞–ª–µ\",\n    \"expert_filter\": [\"[EXPERT_ID]\"],\n    \"stream_progress\": false\n  }' -o /tmp/test_response.json\n\n# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç\necho -e \"\\nüìä –†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞:\"\ncat /tmp/test_response.json | jq -r '\n.expert_responses[] |\n\"Expert: \\(.expert_id)\nChannel: @\\(.channel_username)\nPosts analyzed: \\(.posts_analyzed)\nSources found: \\(.main_sources | length)\nConfidence: \\(.confidence)\nProcessing time: \\(.processing_time_ms)ms\"'\n\n# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ posts endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç —Å expert_id\nFIRST_POST=$(sqlite3 data/experts.db \"SELECT telegram_message_id FROM posts WHERE expert_id='[EXPERT_ID]' LIMIT 1;\")\ncurl -s \"http://localhost:8000/api/v1/posts/$FIRST_POST?expert_id=[EXPERT_ID]\" | \\\n    jq '{telegram_message_id, channel_name, author_name}'\n\n# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å backend\nkill $BACKEND_PID\necho \"‚úÖ Backend –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω\"\n```\n\n**Verification:**\n- ‚úÖ API –æ—Ç–≤–µ—á–∞–µ—Ç\n- ‚úÖ Health check –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç openai_configured: true\n- ‚úÖ –ù–æ–≤—ã–π —ç–∫—Å–ø–µ—Ä—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã\n- ‚úÖ posts_analyzed > 0\n- ‚úÖ Post endpoint –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Å—Ç —Å —É—á—ë—Ç–æ–º expert_id\n\n---\n\n### ‚úÖ –®–ê–ì 9: –û–±–Ω–æ–≤–∏—Ç—å Frontend UI\n\n**Claude Code –æ–±–Ω–æ–≤–∏—Ç** `frontend/src/App.tsx`:\n\n1. –î–æ–±–∞–≤–∏—Ç –≤ –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ expandedExperts (—Å—Ç—Ä–æ–∫–∞ ~18):\n```typescript\nnew Set(['refat', 'ai_architect', '[EXPERT_ID]'])\n```\n\n2. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ò–∑–º–µ–Ω–∏—Ç –ø–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ (—Å—Ç—Ä–æ–∫–∏ ~128-133)\n\n**–í–∞–∂–Ω–æ:** Frontend –ø–µ—Ä–µ–¥–∞—ë—Ç expert_id –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ—Å—Ç–æ–≤ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ telegram_message_id!\n\n**Verification:**\n```bash\ncd frontend\n\n# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å TypeScript\nnpm run type-check && echo \"‚úÖ TypeScript –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–π–¥–µ–Ω–∞\"\n\n# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–æ–≤—ã–π —ç–∫—Å–ø–µ—Ä—Ç –¥–æ–±–∞–≤–ª–µ–Ω\ngrep \"[EXPERT_ID]\" src/App.tsx && echo \"‚úÖ –≠–∫—Å–ø–µ—Ä—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ UI\"\n```\n\n---\n\n### ‚úÖ –®–ê–ì 10: –ü–æ–ª–Ω—ã–π E2E —Ç–µ—Å—Ç\n\n**‚ùì Claude Code —Å–ø—Ä–æ—Å–∏—Ç:** \"–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—ã–π —Ç–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã?\"\n\n**Claude Code –∑–∞–ø—É—Å—Ç–∏—Ç:**\n```bash\n# Terminal 1: Backend\ncd backend && uv run uvicorn src.api.main:app --reload --port 8000\n\n# Terminal 2: Frontend\ncd frontend && npm run dev\n\n# Terminal 3: E2E —Ç–µ—Å—Ç—ã\nsleep 10\n\n# 1. –¢–µ—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ –∫–æ –í–°–ï–ú —ç–∫—Å–ø–µ—Ä—Ç–∞–º\ncurl -X POST http://localhost:8000/api/v1/query \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"query\": \"–ß—Ç–æ —Ç—ã –¥—É–º–∞–µ—à—å –æ–± AI?\", \"stream_progress\": false}' \\\n  -o /tmp/all_experts.json\n\n# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ —ç–∫—Å–ø–µ—Ä—Ç—ã –æ—Ç–≤–µ—Ç–∏–ª–∏\necho \"–≠–∫—Å–ø–µ—Ä—Ç—ã –≤ –æ—Ç–≤–µ—Ç–µ:\"\ncat /tmp/all_experts.json | jq -r '.expert_responses[] | .expert_id'\n# –î–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å [EXPERT_ID]!\n\n# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–æ–ª—è—Ü–∏—é —ç–∫—Å–ø–µ—Ä—Ç–æ–≤\ncat /tmp/all_experts.json | jq -r '\n.expert_responses[] |\n\"\\(.expert_id): posts=\\(.posts_analyzed), sources=\\(.main_sources | length)\"'\n```\n\n**‚ùì Claude Code –ø–æ–ø—Ä–æ—Å–∏—Ç:** \"–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5173 –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:\n1. –ù–æ–≤—ã–π —ç–∫—Å–ø–µ—Ä—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–µ\n2. –ü—Ä–∏ –∫–ª–∏–∫–µ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è\n3. –°—Å—ã–ª–∫–∏ –Ω–∞ –ø–æ—Å—Ç—ã –≤–µ–¥—É—Ç –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª (@[CHANNEL_USERNAME])\n4. –ù–µ—Ç –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π —Å –¥—Ä—É–≥–∏–º–∏ —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏\"\n\n---\n\n### ‚úÖ –®–ê–ì 11: –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π\n\n**‚ùì Claude Code —Å–ø—Ä–æ—Å–∏—Ç:** \"–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è?\"\n\n**Claude Code —Å–¥–µ–ª–∞–µ—Ç:**\n```bash\n# –ü–æ–∫–∞–∑–∞—Ç—å –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã\ngit status\n\n# –î–æ–±–∞–≤–∏—Ç—å –≤ stage\ngit add backend/src/api/models.py\ngit add frontend/src/App.tsx\ngit add docs/add-new-expert-playbook.md\n\n# –°–æ–∑–¥–∞—Ç—å –∫–æ–º–º–∏—Ç —Å –¥–µ—Ç–∞–ª—è–º–∏\ngit commit -m \"feat: Add new expert '[EXPERT_NAME]' to multi-expert system\n\n- Added expert_id '[EXPERT_ID]' with channel '@[CHANNEL_USERNAME]'\n- Channel ID: [CHANNEL_ID] (verified unique)\n- Imported [N] posts and [M] comments\n- Created [X] drift analysis groups\n- Updated models.py helper functions\n- Updated frontend UI accordion\n- All integrity checks passed (no cross-expert pollution)\n\nVerification results:\n- No orphaned records\n- No channel_id conflicts\n- Foreign keys intact\n- Cross-expert isolation verified\n\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\"\n```\n\n---\n\n### ‚úÖ –®–ê–ì 12: –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é\n\n**Claude Code –æ–±–Ω–æ–≤–∏—Ç CLAUDE.md:**\n- –î–æ–±–∞–≤–∏—Ç –Ω–æ–≤–æ–≥–æ —ç–∫—Å–ø–µ—Ä—Ç–∞ –≤ —Å–µ–∫—Ü–∏—é EXPERT_CHANNELS\n- –û–±–Ω–æ–≤–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É\n- –î–æ–±–∞–≤–∏—Ç channel_id mapping\n\n**–§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**\n```bash\n# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —ç–∫—Å–ø–µ—Ä—Ç —É–ø–æ–º—è–Ω—É—Ç –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏\ngrep -q \"[EXPERT_ID]\" CLAUDE.md && echo \"‚úÖ CLAUDE.md –æ–±–Ω–æ–≤–ª—ë–Ω\"\n\n# –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã\nsqlite3 data/experts.db \"\nSELECT\n    COUNT(DISTINCT expert_id) as total_experts,\n    COUNT(*) as total_posts,\n    (SELECT COUNT(*) FROM comments) as total_comments,\n    (SELECT COUNT(*) FROM comment_group_drift WHERE has_drift=1) as drift_groups\nFROM posts;\"\n```\n\n---\n\n## üîÑ –û—Ç–∫–∞—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫)\n\n**–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, Claude Code –º–æ–∂–µ—Ç –æ—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:**\n\n### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–ª–Ω—ã–π –æ—Ç–∫–∞—Ç –∫ backup\n```bash\nBACKUP_NAME=$(cat /tmp/last_backup.txt)\ncp \"data/backups/$BACKUP_NAME\" data/experts.db\necho \"‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏–∑ backup: $BACKUP_NAME\"\n```\n\n### –í–∞—Ä–∏–∞–Ω—Ç 2: –£–¥–∞–ª–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–æ–≤–æ–≥–æ —ç–∫—Å–ø–µ—Ä—Ç–∞ (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫!)\n```bash\nsqlite3 data/experts.db <<SQL\nBEGIN TRANSACTION;\n\n-- –í–ê–ñ–ù–û: –°—Ç—Ä–æ–≥–∏–π –ø–æ—Ä—è–¥–æ–∫ —É–¥–∞–ª–µ–Ω–∏—è –∏–∑-–∑–∞ foreign keys!\n\n-- 1. comment_group_drift (NO CASCADE - —É–¥–∞–ª–∏—Ç—å –ø–µ—Ä–≤—ã–º!)\nDELETE FROM comment_group_drift\nWHERE post_id IN (SELECT post_id FROM posts WHERE expert_id='[EXPERT_ID]');\n\n-- 2. comments (CASCADE –æ—Ç posts, –Ω–æ –ª—É—á—à–µ —è–≤–Ω–æ)\nDELETE FROM comments\nWHERE post_id IN (SELECT post_id FROM posts WHERE expert_id='[EXPERT_ID]');\n\n-- 3. links (–æ–±–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è)\nDELETE FROM links\nWHERE source_post_id IN (SELECT post_id FROM posts WHERE expert_id='[EXPERT_ID]')\n   OR target_post_id IN (SELECT post_id FROM posts WHERE expert_id='[EXPERT_ID]');\n\n-- 4. posts (—Ç–µ–ø–µ—Ä—å –±–µ–∑–æ–ø–∞—Å–Ω–æ —É–¥–∞–ª–∏—Ç—å)\nDELETE FROM posts WHERE expert_id='[EXPERT_ID]';\n\n-- 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å—ë —É–¥–∞–ª–µ–Ω–æ\nSELECT 'Posts remaining:' as check, COUNT(*) FROM posts WHERE expert_id='[EXPERT_ID]'\nUNION ALL\nSELECT 'Comments remaining:', COUNT(*) FROM comments WHERE post_id IN (SELECT post_id FROM posts WHERE expert_id='[EXPERT_ID]')\nUNION ALL\nSELECT 'Drift remaining:', COUNT(*) FROM comment_group_drift WHERE post_id IN (SELECT post_id FROM posts WHERE expert_id='[EXPERT_ID]');\n\n-- 6. –û—Å–≤–æ–±–æ–¥–∏—Ç—å –º–µ—Å—Ç–æ\nVACUUM;\n\nCOMMIT;\nSQL\n\necho \"‚úÖ –≠–∫—Å–ø–µ—Ä—Ç [EXPERT_ID] –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—ë–Ω\"\n```\n\n### –í–∞—Ä–∏–∞–Ω—Ç 3: Git –æ—Ç–∫–∞—Ç\n```bash\ngit checkout -- backend/src/api/models.py frontend/src/App.tsx\ngit status\n```\n\n---\n\n## üìä –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç\n\n–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Claude Code –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç:\n\n```\n============================================================\n‚úÖ –ù–û–í–´–ô –≠–ö–°–ü–ï–†–¢ –£–°–ü–ï–®–ù–û –î–û–ë–ê–í–õ–ï–ù\n============================================================\nExpert ID: [EXPERT_ID]\nExpert Name: [EXPERT_NAME]\nChannel: @[CHANNEL_USERNAME]\nChannel ID: [CHANNEL_ID] (verified unique)\n\n–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ:\n- –ü–æ—Å—Ç–æ–≤: [N]\n- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤: [M]\n- Links: [L]\n- Drift –≥—Ä—É–ø–ø: [X] (–∏–∑ –Ω–∏—Ö [Y] —Å drift)\n\n–ü—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏:\n- ‚úÖ channel_id —É–Ω–∏–∫–∞–ª—å–Ω—ã–π\n- ‚úÖ –ù–µ—Ç orphaned –∑–∞–ø–∏—Å–µ–π\n- ‚úÖ –ù–µ—Ç cross-expert pollution\n- ‚úÖ Foreign keys —Ü–µ–ª–æ—Å—Ç–Ω—ã\n\n–û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ–∞–π–ª—ã:\n- backend/src/api/models.py\n- frontend/src/App.tsx\n- CLAUDE.md\n\n–¢–µ—Å—Ç—ã:\n- ‚úÖ API —Ä–∞–±–æ—Ç–∞–µ—Ç\n- ‚úÖ Frontend –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç\n- ‚úÖ –ó–∞–ø—Ä–æ—Å—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è\n- ‚úÖ –ò–∑–æ–ª—è—Ü–∏—è —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞\n\n–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: [TIME]\n============================================================\n```\n\n---\n\n## ‚ùì –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è\n\n### \"MsgIdInvalidError\" –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤\n**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π channel_id –≤ —Ñ–∏–ª—å—Ç—Ä–µ\n**–†–µ—à–µ–Ω–∏–µ:** –í—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π channel_id\n**–ü—Ä–æ–≤–µ—Ä–∫–∞:** `grep \"channel_id == '$CHANNEL_ID'\" src/data/telegram_comments_fetcher_temp.py`\n\n### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É —ç–∫—Å–ø–µ—Ä—Ç—É (–ú–û–õ–ß–ê–õ–ò–í–ê–Ø –û–®–ò–ë–ö–ê!)\n**–ü—Ä–∏—á–∏–Ω–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ñ–∏–ª—å—Ç—Ä –ø–æ channel_id –ø—Ä–∏ –ø–æ–∏—Å–∫–µ parent post\n**–°–∏–º–ø—Ç–æ–º:** Cross-expert pollution –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç > 0\n**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏\n**–ü—Ä–æ–≤–µ—Ä–∫–∞:** SQL –∑–∞–ø—Ä–æ—Å—ã –∏–∑ –®–∞–≥–∞ 4 Verification\n\n### API –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–ª—é—á–∏\n**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Ç load_dotenv() –≤ main.py\n**–†–µ—à–µ–Ω–∏–µ:** Claude Code –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —ç—Ç–æ –Ω–∞ –®–∞–≥–µ 0\n**–ü—Ä–æ–≤–µ—Ä–∫–∞:** `curl http://localhost:8000/health | jq '.openai_configured'`\n\n### –î—É–±–ª–∏–∫–∞—Ç—ã –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ\n**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∏–º–ø–æ—Ä—Ç —Ç–æ–≥–æ –∂–µ —Ñ–∞–π–ª–∞\n**–†–µ—à–µ–Ω–∏–µ:** UNIQUE constraints (telegram_message_id, channel_id) –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç\n**–ü—Ä–æ–≤–µ—Ä–∫–∞:** SQL –∏–∑ –®–∞–≥–∞ 2 –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã\n\n### Frontend –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—Å—Ç—ã –¥—Ä—É–≥–æ–≥–æ —ç–∫—Å–ø–µ—Ä—Ç–∞\n**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ –ø–µ—Ä–µ–¥–∞–Ω expert_id –≤ API –∑–∞–ø—Ä–æ—Å–µ –∫ /posts endpoint\n**–†–µ—à–µ–Ω–∏–µ:** Frontend –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å expert_id –ø–∞—Ä–∞–º–µ—Ç—Ä\n**–ü—Ä–æ–≤–µ—Ä–∫–∞:** Network tab –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –∑–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã –≤–∫–ª—é—á–∞—Ç—å ?expert_id=\n\n---\n\n## üéØ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–º–µ–Ω—Ç—ã - –ù–ï –ü–†–û–ü–£–°–¢–ò–¢–¨!\n\n1. **channel_id MUST BE UNIQUE** - –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞!\n2. **–ú–∏–≥—Ä–∞—Ü–∏—è 008 –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê** - composite key –¥–ª—è comments\n3. **load_dotenv() –û–ë–Ø–ó–ê–¢–ï–õ–ï–ù** –≤ main.py –¥–æ –¥—Ä—É–≥–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤\n4. **Cross-expert pollution –ø—Ä–æ–≤–µ—Ä–∫–∏** - –ø–æ—Å–ª–µ –ö–ê–ñ–î–û–ì–û –∏–º–ø–æ—Ä—Ç–∞\n5. **–í—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤** - –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π!\n6. **–ü–æ—Ä—è–¥–æ–∫ —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–∏ –æ—Ç–∫–∞—Ç–µ** - drift ‚Üí comments ‚Üí links ‚Üí posts\n7. **expert_id –≤ Frontend –∑–∞–ø—Ä–æ—Å–∞—Ö** - –∏–Ω–∞—á–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã telegram_message_id\n\n---\n\n**–í–µ—Ä—Å–∏—è 3.0 - –ü–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å Claude Code!**"
        }
      }
    ]
  }
]